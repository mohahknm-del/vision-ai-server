<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>الإعدادات | الرؤيا للمطابخ العصرية</title>

  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

  <style>
    body{
      font-family:'Tajawal',sans-serif;
      background:#f4f6fa;
      color:#1F3A63;
      padding:20px;
    }
    .header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:25px;
    }
    .lang-btn{
      border:1px solid #F05A28;
      background:transparent;
      color:#F05A28;
      border-radius:20px;
      padding:6px 14px;
      font-weight:700;
    }
    .cardx{
      background:#fff;
      border-radius:18px;
      box-shadow:0 3px 10px rgba(31,58,99,.07);
      padding:25px;
      border:1px solid #e0e5ec;
      margin-bottom:25px;
    }
    h4{
      border-right:5px solid #F05A28;
      padding-right:10px;
      font-weight:800;
      margin-bottom:20px;
    }
    .btn-accent{
      background:#F05A28;
      color:#fff;
      border:none;
      border-radius:10px;
      padding:10px 18px;
      font-weight:700;
    }
    .btn-accent:hover{background:#d94f22}
  </style>
</head>
<body>
  <div class="header">
    <h3 id="pageTitle">إعدادات النظام</h3>
    <div>
      <a href="dashboard.html" class="btn btn-secondary"><i class="fas fa-arrow-right"></i> رجوع</a>
      <button id="langToggle" class="lang-btn">EN</button>
    </div>
  </div>

  <div class="cardx">
    <h4 id="sysInfo">معلومات الشركة</h4>
    <form id="settingsForm" class="row g-3">
      <div class="col-md-6">
        <label class="form-label" id="lblName">اسم الشركة</label>
        <input type="text" id="companyName" class="form-control">
      </div>
      <div class="col-md-6">
        <label class="form-label" id="lblAddress">العنوان</label>
        <input type="text" id="companyAddress" class="form-control">
      </div>
      <div class="col-md-6">
        <label class="form-label" id="lblPhone">رقم الهاتف</label>
        <input type="text" id="companyPhone" class="form-control">
      </div>
      <div class="col-md-6">
        <label class="form-label" id="lblLogo">شعار الشركة</label>
        <input type="file" id="companyLogo" class="form-control" accept="image/*">
      </div>
      <div class="col-md-6">
        <label class="form-label" id="lblFb">رابط فيسبوك</label>
        <input type="text" id="facebook" class="form-control">
      </div>
      <div class="col-md-6">
        <label class="form-label" id="lblInsta">رابط إنستغرام</label>
        <input type="text" id="instagram" class="form-control">
      </div>
      <div class="col-md-6">
        <label class="form-label" id="lblWhats">رابط واتساب</label>
        <input type="text" id="whatsapp" class="form-control">
      </div>
      <div class="col-12 text-end">
        <button type="submit" class="btn-accent" id="btnSave">حفظ الإعدادات</button>
      </div>
    </form>
  </div>

  <div class="cardx text-center">
    <h5>معاينة الشعار</h5>
    <img id="logoPreview" src="" alt="شعار الشركة" style="max-height:100px;margin-top:10px;">
  </div>

  <script>
    // تحميل الإعدادات من LocalStorage
    const settings = JSON.parse(localStorage.getItem('settings')) || {};

    const form = document.getElementById('settingsForm');
    const preview = document.getElementById('logoPreview');

    // تعبئة القيم القديمة
    form.companyName.value = settings.companyName || "الرؤيا للمطابخ العصرية";
    form.companyAddress.value = settings.companyAddress || "كركوك - الماس - مقابل كنيسة مريم العذراء";
    form.companyPhone.value = settings.companyPhone || "+9647700555782";
    form.facebook.value = settings.facebook || "https://www.facebook.com/share/1BSvzdFinJ";
    form.instagram.value = settings.instagram || "https://www.instagram.com/vizyon750";
    form.whatsapp.value = settings.whatsapp || "https://wa.me/9647700555782";
    preview.src = settings.logo || "../IMG_2491.PNG";

    // عند رفع شعار جديد
    form.companyLogo.addEventListener('change', e=>{
      const file = e.target.files[0];
      if(file){
        const reader = new FileReader();
        reader.onload = ()=>{preview.src = reader.result;}
        reader.readAsDataURL(file);
      }
    });

    // حفظ الإعدادات
    form.addEventListener('submit', e=>{
      e.preventDefault();
      const data = {
        companyName: form.companyName.value.trim(),
        companyAddress: form.companyAddress.value.trim(),
        companyPhone: form.companyPhone.value.trim(),
        facebook: form.facebook.value.trim(),
        instagram: form.instagram.value.trim(),
        whatsapp: form.whatsapp.value.trim(),
        logo: preview.src
      };
      localStorage.setItem('settings', JSON.stringify(data));
      alert('✅ تم حفظ الإعدادات بنجاح!');
    });

    // اللغة
    const langBtn=document.getElementById('langToggle');
    let current='ar';
    const T={
      ar:{
        pageTitle:"إعدادات النظام",
        sysInfo:"معلومات الشركة",
        lblName:"اسم الشركة",
        lblAddress:"العنوان",
        lblPhone:"رقم الهاتف",
        lblLogo:"شعار الشركة",
        lblFb:"رابط فيسبوك",
        lblInsta:"رابط إنستغرام",
        lblWhats:"رابط واتساب",
        btnSave:"حفظ الإعدادات"
      },
      en:{
        pageTitle:"System Settings",
        sysInfo:"Company Information",
        lblName:"Company Name",
        lblAddress:"Address",
        lblPhone:"Phone Number",
        lblLogo:"Company Logo",
        lblFb:"Facebook Link",
        lblInsta:"Instagram Link",
        lblWhats:"WhatsApp Link",
        btnSave:"Save Settings"
      }
    };

    function applyLang(l){
      document.documentElement.dir=(l==='ar'?'rtl':'ltr');
      document.getElementById('pageTitle').textContent=T[l].pageTitle;
      document.getElementById('sysInfo').textContent=T[l].sysInfo;
      document.getElementById('lblName').textContent=T[l].lblName;
      document.getElementById('lblAddress').textContent=T[l].lblAddress;
      document.getElementById('lblPhone').textContent=T[l].lblPhone;
      document.getElementById('lblLogo').textContent=T[l].lblLogo;
      document.getElementById('lblFb').textContent=T[l].lblFb;
      document.getElementById('lblInsta').textContent=T[l].lblInsta;
      document.getElementById('lblWhats').textContent=T[l].lblWhats;
      document.getElementById('btnSave').textContent=T[l].btnSave;
      langBtn.textContent=(l==='ar'?'EN':'AR');
    }
    applyLang('ar');
    langBtn.onclick=()=>{current=(current==='ar'?'en':'ar');applyLang(current);};
  </script>
</body>
</html>
